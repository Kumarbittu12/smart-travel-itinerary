<div class="container">
    <div class="header">
        <h1>Admin Dashboard</h1>
        <p class="subtitle">Overview of your travel planning platform</p>
    </div>

    <!-- Stats Cards -->
    <div class="stats-grid" *ngIf="stats">
        <mat-card class="stat-card">
            <div class="stat-icon users">
                <mat-icon>people</mat-icon>
            </div>
            <div class="stat-content">
                <span class="stat-value">{{ stats.totalUsers }}</span>
                <span class="stat-label">Total Users</span>
            </div>
        </mat-card>

        <mat-card class="stat-card">
            <div class="stat-icon itineraries">
                <mat-icon>flight_takeoff</mat-icon>
            </div>
            <div class="stat-content">
                <span class="stat-value">{{ stats.totalItineraries }}</span>
                <span class="stat-label">Itineraries Created</span>
            </div>
        </mat-card>

        <mat-card class="stat-card">
            <div class="stat-icon revenue">
                <mat-icon>trending_up</mat-icon>
            </div>
            <div class="stat-content">
                <span class="stat-value">{{ stats.totalRevenue.toLocaleString() }}</span>
                <span class="stat-label">Total Budget Planned</span>
            </div>
        </mat-card>

        <mat-card class="stat-card">
            <div class="stat-icon destinations">
                <mat-icon>explore</mat-icon>
            </div>
            <div class="stat-content">
                <span class="stat-value">{{ stats.popularDestinations.length }}</span>
                <span class="stat-label">Unique Destinations</span>
            </div>
        </mat-card>
    </div>

    <!-- Popular Destinations -->
    <mat-card class="section-card" *ngIf="stats">
        <h2>
            <mat-icon>place</mat-icon>
            Popular Destinations
        </h2>
        <div class="destinations-grid">
            <div class="destination-card" *ngFor="let dest of stats.popularDestinations.slice(0, 6)">
                <div class="destination-name">{{ dest.destination }}</div>
                <div class="destination-count">
                    <mat-icon>flight</mat-icon>
                    {{ dest.count }} trips
                </div>
            </div>
        </div>
    </mat-card>

    <!-- Recent Itineraries -->
    <mat-card class="section-card">
        <h2>
            <mat-icon>schedule</mat-icon>
            Recent Itineraries
        </h2>
        <div class="table-container">
            <table mat-table [dataSource]="recentItineraries" class="itinerary-table">
                <ng-container matColumnDef="destination">
                    <th mat-header-cell *matHeaderCellDef>Destination</th>
                    <td mat-cell *matCellDef="let item">
                        <div class="destination-cell">
                            <mat-icon>place</mat-icon>
                            {{ item.destination }}
                        </div>
                    </td>
                </ng-container>

                <ng-container matColumnDef="dates">
                    <th mat-header-cell *matHeaderCellDef>Travel Dates</th>
                    <td mat-cell *matCellDef="let item">
                        {{ formatDate(item.startDate) }} - {{ formatDate(item.endDate) }}
                    </td>
                </ng-container>

                <ng-container matColumnDef="budget">
                    <th mat-header-cell *matHeaderCellDef>Budget</th>
                    <td mat-cell *matCellDef="let item">
                        <span class="budget-value">{{ item.budget }}</span>
                    </td>
                </ng-container>

                <ng-container matColumnDef="status">
                    <th mat-header-cell *matHeaderCellDef>Status</th>
                    <td mat-cell *matCellDef="let item">
                        <mat-chip [class]="getStatusClass(item)">
                            {{ getStatus(item) }}
                        </mat-chip>
                    </td>
                </ng-container>

                <ng-container matColumnDef="created">
                    <th mat-header-cell *matHeaderCellDef>Created</th>
                    <td mat-cell *matCellDef="let item">
                        {{ formatDate(item.createdAt) }}
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
        </div>
    </mat-card>

    <!-- Users Overview -->
    <mat-card class="section-card">
        <h2>
            <mat-icon>people</mat-icon>
            Registered Users
        </h2>
        <div class="users-grid">
            <div class="user-card" *ngFor="let user of users">
                <mat-icon class="user-avatar">account_circle</mat-icon>
                <div class="user-info">
                    <strong>{{ user.name }}</strong>
                    <span>{{ user.email }}</span>
                    <mat-chip class="role-chip">{{ user.role }}</mat-chip>
                </div>
            </div>
        </div>
    </mat-card>
</div>